# **Документация API Swap Cards**

## **Общая информация**

- **Название API:** Swap Cards
- **Версия:** v0
- **Базовый URL:** `http://localhost:8080`

## **Теги API**

- **Пользователи** – методы для работы с пользователями
- **Карточки** – методы для управления карточками
- **Достижения** – методы для получения достижений
- **Авторизация** – методы для работы с аккаунтом

---

## **Пользователи**

### **1. Получить всех пользователей**

**GET** `/api/users`

- **Описание:** Возвращает список всех пользователей.
- **Ответы:**
    - `200 OK` – Список пользователей успешно получен

### **2. Получить пользователя по ID**

**GET** `/api/users/{id}`

- **Описание:** Возвращает информацию о пользователе.
- **Параметры:**
    - `id` (path) – ID пользователя (обязательный)
- **Ответы:**
    - `200 OK` – Пользователь найден
    - `404 Not Found` – Пользователь не найден

### **3. Найти пользователя по никнейму**

**GET** `/api/users/search`

- **Описание:** Ищет пользователей по никнейму, возвращает все подходящие варианты.
- **Параметры:**
    - `name` (query) – Никнейм пользователя (обязательный)
- **Ответы:**
    - `200 OK` – Результаты поиска успешно получены

### **4. Обновить аватар пользователя**

**PATCH** `/api/users/update-pic`

- **Описание:** Обновляет аватар пользователя.
- **Параметры:**
    - `newPic` (query) – Ссылка на новое изображение (обязательный)
- **Ответы:**
    - `200 OK` – Аватар успешно обновлен

### **5. Удалить аватар пользователя**

**DELETE** `/api/users/delete-pic`

- **Описание:** Удаляет аватар пользователя.
- **Ответы:**
    - `204 No Content` – Аватар успешно удален

### **6. Получить все карточки пользователя**

**GET** `/api/users/{id}/cards`

- **Описание:** Возвращает список карточек пользователя.
- **Параметры:**
    - `id` (path) – ID пользователя (обязательный)
- **Ответы:**
    - `200 OK` – Карточки успешно получены
    - `404 Not Found` – Пользователь не найден

### **7. Получить достижения пользователя**

**GET** `/api/users/{id}/achievements`

- **Описание:** Возвращает список достижений пользователя.
- **Параметры:**
    - `id` (path) – ID пользователя (обязательный)
- **Ответы:**
    - `200 OK` – Список достижений успешно получен
    - `404 Not Found` – Пользователь не найден

### **8. Выдать достижение пользователю**

**POST** `/api/users/achievements/{achievementId}`

- **Описание:** Проверяет условия и назначает достижение пользователю.
- **Параметры:**
    - `achievementId` (path) – ID достижения (обязательный)
- **Ответы:**
    - `200 OK` – Достижение успешно выдано
    - `400 Bad Request` – Ошибка: достижение не может быть выдано
    - `404 Not Found` – Пользователь или достижение не найдены

---

## **Карточки**

### **1. Получить все карточки**

**GET** `/api/cards`

- **Описание:** Возвращает список всех карточек.
- **Ответы:**
    - `200 OK` – Список карточек успешно получен

### **2. Создать новую карточку**

**POST** `/api/cards`

- **Описание:** Создает карточку и возвращает информацию о ней.
- **Тело запроса (JSON):**
  ```json
  {
    "name": "Example Card",
    "linkToImage": "https://example.com/image.jpg",
    "description": "This is an example card"
  }
  ```
- **Ответы:**
    - `200 OK` – Карточка успешно создана
    - `400 Bad Request` – Ошибка валидации данных
    - `500 Internal Server Error` – Внутренняя ошибка сервера

### **3. Найти карточку по названию**

**GET** `/api/cards/search`

- **Описание:** Ищет карточку по названию, возвращает все подходящие варианты.
- **Параметры:**
    - `nameQuery` (query) – Название карточки (обязательный)
- **Ответы:**
    - `200 OK` – Результаты поиска успешно получены

### **4. Передать карточку другому пользователю**

**PATCH** `/api/cards/{cardId}/transfer`

- **Описание:** Передает карточку от пользователя-владельца новому пользователю.
- **Параметры:**
    - `cardId` (path) – ID карточки (обязательный)
    - `newOwnerId` (query) – ID нового владельца (обязательный)
- **Ответы:**
    - `200 OK` – Карточка успешно передана
    - `400 Bad Request` – Ошибка запроса (например, если передача невозможна)

---

## **Достижения**

### **1. Получить все достижения**

**GET** `/api/achievements`

- **Описание:** Возвращает список достижений.
- **Ответы:**
    - `200 OK` – Список достижений успешно получен

### **2. Получить достижение по ID**

**GET** `/api/achievements/{id}`

- **Описание:** Возвращает информацию о достижении.
- **Параметры:**
    - `id` (path) – ID достижения (обязательный)
- **Ответы:**
    - `200 OK` – Достижение найдено
    - `404 Not Found` – Достижение не найдено

---

## **Авторизация**

### **1. Регистрация пользователя**

**POST** `/api/auth/register`

- **Описание:** Регистрирует нового пользователя в системе.
- **Ответы:**
  - `200 OK` – Пользователь успешно зарегистрирован
  - `400 Bad Request` – Ошибка регистрации

### **2. Выход из системы**

**POST** `/api/auth/logout`

- **Описание:** Добавляет JWT-токен в черный список, тем самым завершает сеанс авторизации пользователя.
- **Ответы:**
  - `200 OK` – Пользователь успешно завершил сеанс
  - `400 Bad Request` – Не удалось завершить сеанс

### **3. Аутентификация пользователя**

**POST** `/api/auth/login`

- **Описание:** Проверяет email и пароль пользователя. Возвращает JWT-токен при успешной аутентификации.
- **Ответы:**
  - `200 OK` – Успешная аутентификация
  - `400 Bad Request` – Неверный email или пароль

### **4. Смена пароля**

**POST** `/api/auth/change-password`

- **Описание:** Позволяет авторизованному пользователю изменить текущий пароль.
- **Ответы:**
  - `200 OK` – Пароль успешно изменён
  - `400 Bad Request` – Ошибка смены пароля

---

## **Заключение**

Эта документация описывает API проекта Swap-Cards, созданного на основе Spring Boot. Используется OpenAPI (Swagger) для автоматической генерации спецификаций.

